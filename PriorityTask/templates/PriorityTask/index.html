<!-- templates/PriorityTask/index.html -->
{% extends "PriorityTask/base.html" %}
{% load static %}

{% block title %}タスク一覧{% endblock %}

{% block content %}
<div class="page-container">
  <h2>今日のタスクを追加しよう</h2>

  <!-- タスク追加フォーム -->
  <div class="task-form-container">
    <form action="{% url 'PriorityTask:add' %}" method="POST">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" class="primary-btn">追加</button>
    </form>
  </div>

  <!-- 現在のタスク一覧 -->
  <div class="task-list">
    <h3>現在のタスク</h3>
    {% if tasks %}
      {% for task in tasks %}
      <div class="task-card">
        <div class="task-date">
          {{ task.created_date|date:"Y年n月j日" }}
        </div>
        <div class="task-actions">
          <a href="{% url 'PriorityTask:edit' task_id=task.id %}"
             class="edit-link">編集</a>
          <form action="{% url 'PriorityTask:delete' task_id=task.id %}"
                method="POST" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="delete-btn"
              onclick='return confirm("本当に削除しますか？")'>削除</button>
          </form>
        </div>
      </div>
      {% endfor %}
    {% else %}
      <p>まだタスクがありません。</p>
    {% endif %}
  </div>
</div>
{% endblock %}
